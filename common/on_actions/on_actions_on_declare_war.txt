on_actions = {

	#FROM is war target
	on_declare_war = {
		effect = {
			log = "[GetDateText] [Root.GetName] has declared war on [From.GetName]"
			FROM = { set_country_flag = had_war }
			ROOT = { set_country_flag = had_war }

			# removing Italian balance globals
			if = {
				limit = {
					has_global_flag = KR_italy_balance
					tag = GER
					FROM = { tag = FRA }
				}
				clr_global_flag = KR_italy_balance
			}

			# CoF events
			if = {
				limit = {
					ROOT = { tag = FRA }
					FROM = {
						tag = BEL
						is_subject = no
						is_in_faction = no
					}
				}
				FROM = {
					country_event = {
						id = comfrance.167
						days = 2
					}
				}
			}
			if = {
				limit = {
					ROOT = { tag = FRA }
					FROM = {
						tag = HOL
						is_subject = no
						is_in_faction = no
					}
				}
				FROM = {
					country_event = {
						id = comfrance.168
						days = 2
					}
				}
			}

			# Attacking an American country post-ACW while it's in recovery
			if = {
				limit = {
					ROOT = {
						NOT = {
							tag = USA
						}
					}
					FROM = {
						OR = {
							tag = USA
						}
						OR = {
							has_idea = USA_civil_war_aftermath_idea
							has_idea = USA_civil_war_aftermath_idea2
							has_idea = USA_civil_war_aftermath_idea3
							has_idea = USA_civil_war_aftermath_idea4
							has_idea = USA_civil_war_aftermath_idea5
						}
						NOT = { has_country_flag = ACW_attacked_during_recovery }
					}
				}
				FROM = {
					set_country_flag = ACW_attacked_during_recovery
				}
			}

			# China attacking LEC
			if = {
				limit = {
					ROOT = { is_chinese_tag = yes }
					FROM = { tag = LEC }
				}
				ROOT = { set_country_flag = LEC_war }
				every_other_country = {
					limit = {
						OR = {
							LEC = { is_subject_of = PREV }
							has_guaranteed = LEC
							AND = {
								is_faction_leader = yes
								is_in_faction_with = LEC
							}
						}
					}
					set_country_flag = LEC_war_backer
				}
			}
		}
	}
}
